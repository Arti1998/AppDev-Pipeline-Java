@Library('shared-library') _
pipeline {
  environment {
    azcon = credentials('azure-pasha')
    ARM_CLIENT_ID= $azcon_CLIENT_ID
    ARM_CLIENT_SECRET= $azcon_CLIENT_SECRET
    ARM_SUBSCRIPTION_ID= $azcon_SUBSCRIPTION_ID
    ARM_TENANT_ID= $azcon_TENANT_ID
  }
  stages {
    stage('Terraform Init') {
      steps {
        Terraform.init()
      }
    }
    stage('Terraform Plan') {
      steps {
        Terraform.plan()
      }
    }
    stage('Terraform Apply') {
      steps {
        Terraform.Apply()
      }
    }
    stage('Download Artifact') {
      steps {
        DownloadArtifact(url)
    }
    }
     stage('Deply App to Tomcat') {
      steps {
        DeployApp()
    }
    }    
  }
}

@Library('shared-library') _
pipeline {
  agent any
  environment {
    azcon = credentials('azure-pasha')
  }
  stages {
    stage('Configure Azure Credentials') {
      steps {
        bat label:'', script: 'set ARM_CLIENT_ID=$azcon_CLIENT_ID'
        bat label:'', script: 'set ARM_CLIENT_SECRET=$azcon_CLIENT_SECRET'
        bat label:'', script: 'set ARM_SUBSCRIPTION_ID=$azcon_SUBSCRIPTION_ID'
        bat label:'', script: 'set ARM_TENANT_ID=$azcon_TENANT_ID'
      }    
    }
    stage('Terraform Init') {
      steps {
        bat label:'', script: 'echo %ARM_CLIENT_ID%'
        Infra()
      }
    }
   
    
  }
}
